$(document).ready(function(){var a=d3.select("body").append("article"),b=0;d3.xml("images/US_Counties.svg",function(c,d){if(c)return void console.log(c);var e=d.getElementsByTagName("svg")[0];a.node().appendChild(e),countyLines=a.select("svg").selectAll("path").style({stroke:"#004563","stroke-width":.2});var f=window.search_term,g=window.counties;$("path").data("count",0);for(i in g)$('path[data-label = "'+g[i]+'"]').css({fill:"rgba(152,204,150,"+.05*g[i].count+")"}),$('path[data-label = "'+g[i]+'"]').data("count",1),b+=1;$('path[data-label = "America"]').data("count",b),$(".county-info").html(b+' tweets in America about "'+f+'"'),countyLines.on("mouseover",function(){var a=$(this).data("label"),b=$(this).data("count"),c="tweet";(b>1||0==b)&&(c="tweets"),d3.select(this).style("stroke-width","2"),$(".county-info").html(b+" "+c+" in "+a+' about "'+f+'"')}).on("mouseout",function(){d3.select(this).style("stroke-width",".2"),$(".county-info").html(b+' tweets in America about "'+f+'"')}).on("click",function(){d3.select(this).style("stroke-width","2")})})});